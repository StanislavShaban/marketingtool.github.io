<!DOCTYPE html>
<html>
<head>
	<script src="https://vk.com/js/api/xd_connection.js?2"  type="text/javascript"></script>
	<title></title>
</head>
<body>
	<input type="button" onclick="login();" value="Login"/>
	<script type="text/javascript">
		var accessToken = getAccessToken();
		if(accessToken){
			httpRequest();
		}
		console.log(accessToken);

		function httpRequest(){
			const Http = new XMLHttpRequest();
			const url='https://api.vk.com/method/friends.get?user_id=22177744&access_token='+accessToken+'&v=5.103';
			Http.open("GET", url);
			Http.send();

			Http.onreadystatechange = (e) => {
			  console.log(Http.responseText)
			}
		}

		function login(){
			window.location.href = 'https://oauth.vk.com/authorize?client_id=7205438&display=page&redirect_uri=https://stanislavshaban.github.io&scope=friends&response_type=token&v=5.103&state=123456';
		}

		function getAccessToken() {
			return window.location.href.split('#')[1].split('=')[1].split('&')[0];
		}

	</script>
</body>
</html>
